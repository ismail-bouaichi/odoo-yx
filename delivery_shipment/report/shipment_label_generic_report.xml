<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        <record id="paperformat_generic_label" model="report.paperformat">
            <field name="name">Generic Label Format</field>
            <field name="format">custom</field>
            <field name="page_width">103</field>
            <field name="page_height">143</field>
            <field name="orientation">Portrait</field>
            <field name="margin_top">0</field>
            <field name="margin_bottom">0</field>
            <field name="margin_left">0</field>
            <field name="margin_right">0</field>
            <field name="header_spacing">0</field>
            <field name="dpi">96</field>
            <field name="disable_shrinking" eval="True"/>
        </record>

        <record id="action_report_shipment_label_generic" model="ir.actions.report">
            <field name="name">Etiquette Standard</field>
            <field name="model">delivery.shipment</field>
            <field name="report_type">qweb-pdf</field>
            <field name="report_name">delivery_shipment.report_shipment_label_generic</field>
            <field name="report_file">delivery_shipment.report_shipment_label_generic</field>
            <field name="binding_model_id" ref="model_delivery_shipment"/>
            <field name="binding_type">report</field>
            <field name="paperformat_id" ref="delivery_shipment.paperformat_generic_label"/>
        </record>

        <template id="report_shipment_label_generic">
            <t t-call="web.basic_layout">
                <style>
                    
                    body, html {
                        font-family: Arial, sans-serif;
                        color: #000;
                        margin: 0;
                        padding: 0;
                        width: 100%;
                        height: 100%;
                    }
                    .page {
                        width: 103mm;
                        height: 143mm;
                        box-sizing: border-box;
                        page-break-after: always;
                        position: relative;
                         margin: 0 auto; 
                        overflow: hidden;
                    }
                    .page:last-child { page-break-after: auto; }
                    
                    
                    .center-table {
                        width: 100%;
                        height: 100%;
                        border-collapse: collapse;
                        border: none;
                    }
                    .center-cell {
                        vertical-align: middle; 
                        text-align: center;     
                        padding: 5mm;
                    }

                    /* Typography */
                    .mb-8 { margin-bottom: 15px; }
                    .mb-12 { margin-bottom: 25px; }
                    .underline { text-decoration: underline; }
                    
                    .title { 
                        font-size: 45px; 
                        font-weight: 900;
                    }
                    .text-client {
                        font-size: 32px;  
                        font-weight: bold;
                        text-transform: uppercase;
                    }
                    .text-normal {
                        font-size: 28px;  
                        font-weight: bold;
                    }
                </style>

                <t t-foreach="docs" t-as="shipment">
                    <t t-foreach="shipment.package_ids" t-as="package">
                        <div class="page">
                            <table class="center-table table-borderless">
                                <tr>
                                    <td class="center-cell">
                                        
                                        <div class="mb-12 underline title">
                                            NÂ°: <t t-esc="package.reference or package.gab or shipment.name"/>
                                        </div>
                                        
                                        <div class="mb-8 text-client">
                                            <t t-esc="(shipment.partner_id.name or '').split(' ')[0]"/>
                                        </div>
                                        
                                        <div class="mb-8 text-normal">
                                            <t t-esc="' '.join((shipment.partner_id.name or '').split(' ')[1:])"/>
                                        </div>
                                        
                                        <div class="mb-8 text-normal">
                                            <t t-esc="shipment.partner_id.city or ''"/>
                                        </div>
                                        
                                        <div class="mb-8 text-normal">
                                            <t t-esc="shipment.partner_id.street or ''"/>
                                            <t t-if="shipment.partner_id.street2">
                                                <br/><t t-esc="shipment.partner_id.street2"/>
                                            </t>
                                        </div>
                                        
                                        <div class="mb-8 text-normal">
                                            <t t-esc="shipment.delivery_company_id.name or ''"/>
                                        </div>
                                        
                                        <div t-if="shipment.ms_destinataire" class="mb-8 text-normal">
                                            <t t-esc="shipment.ms_destinataire"/>
                                        </div>
                                        
                                        <div t-if="package.vd" class="mb-8 text-normal">
                                            VD: <t t-esc="package.vd"/>
                                        </div>

                                    </td>
                                </tr>
                            </table>
                        </div>
                    </t>
                </t>
            </t>
        </template>
    </data>
</odoo>